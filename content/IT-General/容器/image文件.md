---
tags:
  - IT/容器
---


二进制，容器的模板 → 生成容器。
[[docker]]根据image文件生成的容器实例，本身也是一个文件，称为容器文件。
也就是说，一旦容器生成，就会同时存在两个文件： **image文件**和**容器文件**。
而且关闭容器并不会删除容器文件，只是容器停止运行而已。终止运行的容器文件，依然会占据硬盘空间，可以使用命令删除。

生成自己的image文件需要用dockerfile文件，用来配置image。docker可根据dockerfile生成image文件。

Docker镜像是由文件系统叠加：
- L3：可写容器（当从镜像启动容器时，Docker会加载这层。copy on write）
- L2：rootfs（root文件系统。可以是一种或多种OS，如Ubuntu文件系统。永远是只读状态。镜像可叠加——联合加载，这样最终的文件系统会包含所有底层的文件和目录，最底部的叫基础镜像。）
- L1：bootfs（引导文件系统）
- 联合文件系统：在Docker中，只读层及在顶部的读写层的组合被称为 Union File System。


Docker根目录：`/var/lib/docker`  （也可以看出ubuntu这种OS文件就是overlay2）


**仓库：**
- 用户仓库命令由用户名/仓库名组成
- 顶层仓库(官方)只包含仓库名部分